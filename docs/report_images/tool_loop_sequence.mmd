sequenceDiagram
    autonumber
    participant U as User
    participant SA as SlackAgent
    participant H as Hooks
    participant L as LLM
    participant TE as ToolExecutor
    participant B as Brain/Web

    Note over U,B: User sends message
    U->>SA: "Find React hooks info"
    
    Note over SA,H: Pre-Processing
    SA->>H: intent_classifier_hook()
    H-->>SA: Intent = RESEARCH
    
    Note over SA,L: LLM Generation
    SA->>L: Prompt + Tools
    L-->>SA: <tool_use>web_search</tool_use>
    
    Note over SA,TE: Tool Execution
    SA->>TE: Execute web_search
    TE->>B: Fetch results
    B-->>TE: URLs + Snippets
    TE->>TE: Record to tracker
    TE-->>SA: ToolResult
    
    Note over SA,L: Final Generation
    SA->>L: Context + Question
    L-->>SA: Answer text
    
    Note over SA,H: Post-Processing
    SA->>H: citation_hook()
    H->>H: Format citations
    H-->>SA: Enhanced text
    
    Note over U,SA: Response
    SA->>U: Answer + Sources
